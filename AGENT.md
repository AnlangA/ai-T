# AI Translate Tool - 项目需求文档

## 项目概述

构建一个基于egui的AI文本翻译工具，使用zai-rs提供的GLM-4.7 API进行多语言文本翻译。

**相关文档：**
- egui: https://github.com/emilk/egui
- zai-rs: https://github.com/AnlangA/zai-rs

---

## 1. 总体目标

- 使用 `egui` 构建现代化用户界面
- 使用 `zai-rs` 接口集成 GLM-4.7 模型（coding-plan 模式）
- 支持多种语言的文本翻译
- 实现流式输出和实时显示

---

## 2. 架构需求

### 2.1 技术栈
- **UI框架**: egui
- **异步运行时**: tokio
- **AI模型**: zai-rs GLM-4.7 (coding-plan 模式)
- **输出模式**: 流式输出 (streaming)

### 2.2 架构设计
- **UI与数据处理分离**: 使用tokio进行UI和数据处理之间的通信，确保UI显示流畅性
- **流式数据处理**:
  - 从AI接收流式输出
  - 实时显示到UI
  - 同时保存到日志文件
- **高度结构化和现代化的软件架构**
- **每个子目录需包含 AGENT.md**: 说明该目录下代码的功能，作为开发计划文档

---

## 3. UI需求

### 3.1 布局结构
- **右侧栏**:
  - 顶部: API Key 输入框（使用egui内置保存功能持久化）
  - 中上部: 目标语言选择（支持多语言选择，翻译过程中不可修改）
  - 下部: 源文本输入框
- **中间区域**: 结构化显示输入文本和翻译结果

### 3.2 功能特性
- **语言支持**: 输入语言由AI自动识别
- **实时翻译**: 流式显示翻译结果
- **现代UI设计**: 支持黑白主题切换
- **字体调整**: 支持字体大小调整

---

## 4. 测试要求

- 代码格式化: `cargo fmt`
- 代码检查: `cargo clippy`
- 单元测试覆盖
- 基础 CI/CD 配置

---

## 5. 日志需求

- 所有对话和翻译结果以文本格式保存到日志文件
- 日志应包含时间戳和完整的翻译上下文
